{% extends "frameWithTitle.html" %}

{% block content %}
    <div class="container" style="width: 980px">
        <div class='row-fluid'>
            <div class='span12'>
                <h5>{{docList.source_info.source_name}}</h5>
                <p>{{ docList.source_info.source_desc }}</p>
            </div>
        </div>
        <div class="row-fluid">
            <div class='span12'>
                <table class='table'>
                    <tr>
                        <th>TID</th>
                        <th>标题</th>
                        <th>更新时间</th>
                        <th>同步</th>
                        <th>状态(总回复，以同步回复)</th>
                    </tr>
                    <tbody>
                    {% for t,doc in docs %}
                    <tr>
                        <td>{{ t.tid  }}</td>
                        <td>
                            <a href='{{ t.url }}' target="_blank">{{ t.subject }}</a>

                        </td>
                        <td>{{ t.created_at }}</td>
                        <td>

                        <a href="#"
                           {% if doc %}
                            class='btn'
                            {% else %}
                            class='btn btn-primary'
                           {% endif %}
                            onclick="syncItem({{ t.tid }},1)" >
                            同步
                        </a>



                        </td>
                        <td>
                            <a href="/sync/htsync/t/{{ t.tid }}" target="_blank"  >查看</a>
                            {{ t.reply_count }}/{{ doc.topic.reply_count }}
                        </td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script>
        function syncItem(tid,page){
            $.get('/sync/htsync/t/'+tid+'/'+page+'?json=true',function(data){
                alert(data['result']);
            });
        }
    </script>
{% endblock %}